<!DOCTYPE html>
<html class="dark" lang="pt-BR">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta name="theme-color" content="#00C896">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="MedClinic - Sistema de Gestão de Clínicas Médicas">
    <title>Login - MedClinic</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="../assets/icons/icon-192.png">
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&amp;display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <link rel="stylesheet" href="../css/global.css">
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#197fe6",
                        "background-dark": "#111921",
                        "surface-dark": "#1c242e",
                        "border-dark": "#2a3441",
                    },
                    fontFamily: { "display": ["Manrope", "sans-serif"] }
                },
            },
        }
    </script>
</head>

<body class="bg-background-dark text-white font-display min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-md bg-surface-dark border border-border-dark rounded-xl p-8 shadow-2xl">
        <div class="flex flex-col items-center mb-8">
            <div class="text-primary mb-3">
                <span class="material-symbols-outlined !text-[48px]">local_hospital</span>
            </div>
            <h1 class="text-2xl font-bold">MedClinic</h1>
            <p class="text-slate-400 text-sm">Acesse sua conta</p>
        </div>

        <form id="login-form" class="flex flex-col gap-4">
            <div>
                <label class="block text-sm font-medium text-slate-300 mb-1">Email</label>
                <input type="email" id="email"
                    class="w-full bg-background-dark border border-border-dark rounded-lg px-4 py-2 focus:ring-primary focus:border-primary"
                    placeholder="seu@email.com">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-300 mb-1">Senha</label>
                <input type="password" id="password"
                    class="w-full bg-background-dark border border-border-dark rounded-lg px-4 py-2 focus:ring-primary focus:border-primary"
                    placeholder="••••••••">
            </div>
            <div>
                <label class="block text-sm font-medium text-slate-300 mb-1">Tipo de Acesso</label>
                <select id="role"
                    class="w-full bg-background-dark border border-border-dark rounded-lg px-4 py-2 focus:ring-primary focus:border-primary text-white">
                    <option value="patient">Paciente</option>
                    <option value="receptionist">Recepcionista</option>
                    <option value="lab_tech">Setor de Exames</option>
                    <option value="health_professional">Profissional de Saúde</option>
                    <option value="clinic_admin">Gestor da Clínica</option>
                    <option value="system_admin">Administrador do Sistema</option>
                </select>
            </div>
            <button type="submit"
                class="w-full bg-primary hover:bg-blue-600 text-white font-bold py-2.5 rounded-lg transition-colors mt-2">
                Entrar
            </button>
        </form>

        <div class="mt-6 text-center text-xs text-slate-500">
            <p>Ainda não tem conta? <a href="register.html" class="text-primary hover:underline">Cadastre-se</a></p>
        </div>
    </div>

    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />
    <script>
        const roleRoutes = {
            'patient': 'patient-dashboard.html',
            'receptionist': 'reception-dashboard.html',
            'lab_tech': 'lab-dashboard.html',
            'health_professional': 'doctor-dashboard.html',
            'clinic_admin': 'manager-dashboard.html',
            'system_admin': 'admin-dashboard.html'
        };

        document.getElementById('login-form').addEventListener('submit', function (e) {
            e.preventDefault();
            const role = document.getElementById('role').value;
            localStorage.setItem('userRole', role);
            window.location.href = roleRoutes[role] || 'index.html';
        });

        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(reg => console.log('[PWA] Service Worker registered'))
                    .catch(err => console.log('[PWA] SW registration failed:', err));
            });
        }
    </script>
</body>

</html>